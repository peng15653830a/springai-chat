# 测试环境数据源配置 - 强制使用H2
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.url=jdbc:h2:mem:testdb;MODE=MySQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.platform=h2

# H2控制台配置
spring.h2.console.enabled=false

# JPA配置 - 测试环境使用H2
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# SQL初始化配置
spring.sql.init.mode=embedded
spring.sql.init.encoding=UTF-8
spring.sql.init.continue-on-error=true

# MyBatis配置 - 测试环境
mybatis.mapper-locations=classpath:mapper/*.xml
mybatis.type-aliases-package=com.example.entity
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.configuration.cache-enabled=true
mybatis.configuration.lazy-loading-enabled=true

# 搜索服务配置 - 测试环境
search.tavily.api-key=test-search-key
search.tavily.base-url=https://api.test.com/search
search.enabled=false

# AI配置 - 测试环境使用模拟配置
spring.ai.openai.api-key=test-openai-key
spring.ai.openai.base-url=https://api.test.com/v1
spring.ai.openai.chat.options.model=test-model
spring.ai.openai.chat.options.temperature=0.7
spring.ai.openai.chat.options.max-tokens=1000

# 日志配置 - 测试环境简化
logging.level.com.example=INFO
logging.level.org.springframework=WARN
logging.level.org.mybatis=WARN
logging.level.org.apache.http=WARN

# 应用配置 - 测试环境
app.chat.max-history-size=5
app.chat.response-timeout=5s
app.chat.sse-timeout=5s
app.chat.streaming.chunk-size=50
app.chat.streaming.delay-ms=100

# 服务器配置 - 随机端口
server.port=0