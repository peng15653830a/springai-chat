# 秘塔搜索API配置指南

本项目已将搜索服务从Google搜索API替换为秘塔搜索API，以提供更好的中文搜索体验。

## 获取秘塔API密钥

1. 访问秘塔搜索官网：https://metaso.cn
2. 注册账号并登录
3. 进入开发者控制台
4. 创建新的API应用
5. 获取API密钥

## 配置方法

### 方法一：环境变量配置（推荐）

```bash
export METASO_API_KEY="your_metaso_api_key_here"
export SEARCH_ENABLED="true"
```

### 方法二：修改配置文件

编辑 `src/main/resources/application.yml`：

```yaml
search:
  metaso:
    api-key: your_metaso_api_key_here
    enabled: true
```

## API特性

- **中文优化**：专为中文搜索优化，搜索结果更准确
- **实时性**：提供最新的搜索结果
- **多样化**：支持网页、新闻、学术等多种搜索类型
- **高可用**：稳定的API服务，响应速度快

## 搜索触发条件

系统会在以下情况自动触发搜索：

### 时间相关关键词
- 最新、今天、现在、当前、实时、近期、目前等

### 信息查询关键词
- 新闻、资讯、消息、报道、动态、头条等

### 金融相关关键词
- 天气、股价、汇率、股票、基金、投资、行情、价格等

### 疑问词汇
- 什么是、如何、怎么、哪里、什么时候、为什么等

### 搜索指示词
- 搜索、查询、找、查找、了解、知道等

## 降级策略

如果秘塔API不可用，系统会自动降级到：

1. **DuckDuckGo免费API**：作为备用搜索源
2. **增强本地搜索**：基于关键词生成相关信息

## 测试搜索功能

启动应用后，可以发送以下消息测试搜索功能：

- "今天天气怎么样？"
- "最新科技新闻"
- "股票行情如何？"
- "什么是人工智能？"

## 注意事项

1. **API配额**：请注意API的调用次数限制
2. **网络环境**：确保服务器能够访问秘塔API
3. **错误处理**：系统已内置错误处理和降级机制
4. **日志监控**：可通过日志查看搜索API的调用情况

## 故障排除

### 搜索不工作
1. 检查API密钥是否正确配置
2. 确认网络连接正常
3. 查看应用日志中的错误信息

### API调用失败
1. 验证API密钥有效性
2. 检查API配额是否用完
3. 确认秘塔API服务状态

### 搜索结果为空
1. 检查搜索关键词是否触发搜索条件
2. 验证API返回的数据格式
3. 查看是否降级到备用搜索源

## 开发者信息

- **API文档**：https://metaso.cn/docs
- **技术支持**：support@metaso.cn
- **状态页面**：https://status.metaso.cn

---

如有问题，请查看应用日志或联系开发团队。